<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link src="dist/apexcharts.css" rel="stylesheet" type="text/css">
</head>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"
    integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<body>
    <div id="chart">
    </div>
    <div class="ag-title">SIP CALCULATOR</div>
    <div class="ag-calculators-block">
        <div class="ag-format-container">
            <div id="affiliate" class="ag-calculator-block">
                <div class="ag-calculator_title">Calculate your returns</div>
                <div class="js-calculator_input-wrap ag-calculator_input-wrap">
                    <label class="ag-calculator_label" for="monthly_investment">Monthly Investment</label>
                    <input id="monthly_investment" class="js-calculator_text-input ag-calculator_text-input"
                        onchange="abc()" type="number" name="monthly_investment" min="0" max="100000"
                        value="10000">
                    <input class="js-calculator_range" step="1" type="range" name="monthly_investment" min="0"
                        max="100000" value="10000">
                </div>
                <div class="js-calculator_input-wrap ag-calculator_input-wrap">
                    <label class="ag-calculator_label" for="time__period">Time Period</label>
                    <input id="time__period" class="js-calculator_text-input ag-calculator_text-input" type="number"
                        onchange="abc()" name="time__period" min="0" max="40" value="1" step="0.5">
                    <input class="js-calculator_range" step="0.5" type="range" name="time__period" min="0" max="40"
                        value="3">
                </div>
                <div class="ag-calculator_results-box">
                    <div class="ag-calculator_results-info">
                        <div class="ag-calculator_results-title">Your Fabits Return</div>
                        <div id="affiliate-result" class="ag-calculator_results-sum">
                            <span class="ag-calculator_results-currency">₹</span>
                        </div>
                    </div>
                </div>
                <div class="ag-calculator_results-box">
                    <div class="ag-calculator_results-info">
                        <div class="ag-calculator_results-title">Your Mutual funds Return</div>
                        <div id="affiliate-result2" class="ag-calculator_results-sum">
                            <span class="ag-calculator_results-currency">₹</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/rangeslider.js/2.3.2/rangeslider.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.js"></script>
    <script
        src="https://rawcdn.githack.com/SochavaAG/example-mycode/master/pens/calculator/plugins/rangeslider/rangeslider.min.js"></script>
    <script src="dist/apexcharts.min.js"></script>

    <script>
        (function ($) {
            $(function () {

                $("input[type=range]").rangeslider({ polyfill: true });

                var t = $("#monthly_investment"),
                    e = $("#daily-orders"),
                    i = $("#time__period"),
                    l = $("#affiliate-result"),
                    m = $("#affiliate-result2"),
                    p = $("#agent-result"),
                    u = $(".tab-pane.active").attr("id"),
                    h = $(".js-calculator_second-level-wrap"),
                    chart = $(".charts"),
                    etf__returns = 0.0083333,
                    mf__returns = 0.0067916;

                function agFormula() {
                    l.html(parseInt(t.val() * (1 + etf__returns) * (Math.pow((1 + etf__returns), (i.val() * 12)) - 1) / (etf__returns))).digits().append("<span class=\"ag-calculator_results-currency\">₹</span>");
                    m.html(parseInt(t.val() * (1 + mf__returns) * (Math.pow((1 + mf__returns), (i.val() * 12)) - 1) / (mf__returns))).digits().append("<span class=\"ag-calculator_results-currency\">₹</span>");
                }

                    $(".js-calculator_input-wrap > .js-calculator_range").on("change input", function () {
                        $(this).parent().find(".js-calculator_text-input").val($(this).val());
                        agFormula();
                    });

                    $(".js-calculator_input-wrap > .js-calculator_text-input").on("change input", function () {
                        $(this).parent().find(".js-calculator_range").val($(this).val());
                        agFormula();
                    });
        



                $.fn.digits = function () {
                    return this.each(function () {
                        console.log($(this).text());
                        $(this).text($(this).text().replace(/(\d)(?=(\d\d)+\d$)/g, "$1,"));
                    });
                };
                agFormula();
                agFormulas();
            });
        })(jQuery);

        //    var options = {
        //        chart: {
        //          type: 'line'
        //        },
        //        series: [{
        //          name: 'Total amount',
        //          data: [10000, 20000, 30000, 40000, 50000, 60000, 70000, 80000, 90000]
        //     
        //        }],
        //        xaxis: {
        //          categories: [
        //            "1 year" , 
        //            "2 years",
        //            "3 years",
        //            "4 years",
        //            "5 years",
        //            "6 years",
        //            "7 years",
        //            "8 years",
        //            "9 years",
        //          ]
        //        }
        //      }
        //      
        //      var chart = new ApexCharts(document.querySelector("#chart"), options);
        //      
        //      chart.render();

        var options = {
            series: [{
                name: 'ETF',
                data: [100, 200, 300, 400, 500]
            }, {
                name: 'MF',
                data: [50, 150, 250, 350, 450]
            }],
            chart: {
                type: 'line',
                height: 350
            },
            stroke: {
                width: [4, 4]
            },
        };

        var chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();

        // Update chart data using agFormula function
        function agFormulas() {
            var etfData = [];
            var mfData = [];

            // Generate ETF and MF data dynamically with the help of loop and the i.val will be years and it will iterate

            for (var j = 1; j <= 5; i++) {
                etfData.push(parseInt(t.val() * (1 + etf__returns) * (Math.pow((1 + etf__returns), (i.val() * 12)) - 1) / (etf__returns)));
                mfData.push(parseInt(t.val() * (1 + mf__returns) * (Math.pow((1 + mf__returns), (i.val() * 12)) - 1) / (mf__returns)));
            }

            console.log(etfData);
            console.log(mfData);

            // etfData.push(parseInt(t.val() * (1 + etf__returns / 12) * ((1 + etf__returns / 12) ^ (i.val() - 1)) / (etf__returns / 12)));
            // mfData.push(parseInt(t.val() * (1 + mf__returns / 12) * ((1 + mf__returns / 12) ^ (i.val() - 1)) / (mf__returns / 12)));  

            // Update chart series with new data
            chart.updateSeries([{
                name: 'ETF',
                data: etfData
            }, {
                name: 'MF',
                data: mfData
            }]);

        }


    </script>

</body>

</html>